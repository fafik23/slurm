sudo: required
language: c
addons:
  mariadb: '10.1'
  apt:
    packages:
    - cmake
    - libmunge-dev 
    - liblua5.2-dev
    - munge
    - expect
    - libhwloc-dev
    - libnuma1
    - libpam-dev
compiler:
  - clang
  - gcc
cache: ccache
before_script:
  - export PATH=/usr/lib/ccache:$PATH
script:
  - ./configure --enable-multiple-slurmd --prefix=/tmp/slurm/ > /dev/null
  - make -j > /dev/null
  - make -j install > /dev/null

after_script:
  - if [[ "$TRAVIS_EVENT_TYPE" == "cron" ]]; then  echo CRON ;else  testsuite/test-reg.sh ; fi
